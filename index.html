<!DOCTYPE html>
<html>
<head>
  <meta charset="UTF-8" />
  <title>GLPK.js Minimal Test</title>
</head>
<body>

<h1>Minimal GLPK.js Test</h1>
<p>
  This solves a small problem:<br>
  Minimize 5x + 6y<br>
  Subject to:<br>
  x + y >= 100,<br>
  x <= 80,<br>
  y <= 50,<br>
  x, y >= 0
</p>

<button id="solveBtn">Solve LP</button>
<pre id="solutionArea"></pre>

<!-- Load glpk.js -->
<script src="https://cdn.jsdelivr.net/npm/glpk.js@0.19.2/dist/glpk.min.js"></script>

<script>
  const solveBtn = document.getElementById('solveBtn');
  const solArea  = document.getElementById('solutionArea');

  solveBtn.addEventListener('click', () => {
    solArea.textContent = "Solving...";

    // Define a small LP in glpk.js format
    const lp = {
      name: "SmallLP",
      objective: {
        direction: glpk.GLP_MIN,
        name: "obj",
        vars: [
          { name: "x", coef: 5 },
          { name: "y", coef: 6 },
        ],
      },
      subjectTo: [
        {
          name: "c1",  // x + y >= 100
          vars: [
            { name: "x", coef: 1 },
            { name: "y", coef: 1 },
          ],
          bnds: {
            type: glpk.GLP_LO,
            val: 100,
          },
        },
        {
          name: "c2",  // x <= 80
          vars: [
            { name: "x", coef: 1 },
          ],
          bnds: {
            type: glpk.GLP_UP,
            val: 80,
          },
        },
        {
          name: "c3",  // y <= 50
          vars: [
            { name: "y", coef: 1 },
          ],
          bnds: {
            type: glpk.GLP_UP,
            val: 50,
          },
        },
      ],
      bounds: [
        { name: "x", type: glpk.GLP_LO, val: 0 },
        { name: "y", type: glpk.GLP_LO, val: 0 },
      ],
    };

    try {
      const result = glpk.solve(lp);
      if (result?.result) {
        const { x, y, z } = result.result;
        solArea.textContent = `Optimal solution found:\n\nx = ${x}\ny = ${y}\nMin cost = ${z}`;
      } else {
        solArea.textContent = "No feasible solution or an error occurred.";
      }
    } catch (err) {
      console.error(err);
      solArea.textContent = "Error solving LP. Check console for details.";
    }
  });
</script>

</body>
</html>

